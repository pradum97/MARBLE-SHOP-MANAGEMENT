//DROP TABLE

CREATE TABLE TBL_SHOP_DETAILS
(

    SHOP_NAME       VARCHAR(100) NOT NULL,
    SHOP_EMAIL      VARCHAR(100) NOT NULL,
    SHOP_PHONE_1    VARCHAR(10)      NOT NULL,
    SHOP_PHONE_2    VARCHAR(10),
    SHOP_GST_NUMBER VARCHAR(100),
    SHOP_ADDRESS    VARCHAR(200) NOT NULL
)


INSERT INTO TBL_SHOP_DETAILS (SHOP_NAME, SHOP_EMAIL, SHOP_PHONE_1, SHOP_PHONE_2, SHOP_GST_NUMBER, SHOP_ADDRESS)
                        VALUES ('SUMA MARBAL & TIELS','devrajimas@gmail.com',9570294565 , 9122383010 ,
                                '10DGBPK6505G1ZY','छोटी बलिया ,  NH-31 , पानी टंकी से पूरब ( बेगूसराय ) ,851211 , BIHAR')


CREATE TABLE TBL_MENU
(

    MENU_ID       SERIAL PRIMARY KEY,
    MENU_NAME     VARCHAR(30),
    MENU_LOCATION VARCHAR(10),
    MENU_ICON_PATH VARCHAR(500)

)

INSERT INTO TBL_MENU(MENU_ICON_PATH ,MENU_NAME, MENU_LOCATION)
VALUES ('home_icon.png','HOME', 'SIDE'),
       ('profile_ic.png','PROFILE', 'SIDE'),
       ('employ.png','USERS', 'SIDE'),
       ('settings_ic.png','SETTING', 'TOP'),
       ('shop_icon.png','ALL PRODUCT', 'SIDE'),
       ('sell_ic.png','SALE REPORT', 'SIDE'),
       ('viewReport_icon.png','SELL REPORT', 'SIDE'),
       ('stock_ic.png','STOCK REPORT', 'SIDE'),
       ('add_icon.png','ADD PRODUCT', 'TOP'),
       ('feedback_ic.png','FEEDBACK', 'TOP')


CREATE TABLE TBL_USERS
(
    USER_ID        SERIAL PRIMARY KEY    NOT NULL,
    FIRST_NAME     VARCHAR(15)           NOT NULL,
    LAST_NAME      VARCHAR(15),
    USERNAME VARCHAR(100) NOT NULL ,
    GENDER         VARCHAR(6)            NOT NULL,
    ROLE           VARCHAR(20)           NOT NULL,
    EMAIL          VARCHAR(100)          NOT NULL,
    PHONE          bigint                NOT NULL,
    PASSWORD       VARCHAR(200)          NOT NULL,
    FULL_ADDRESS   VARCHAR(200),
    USER_IMG_PATH  VARCHAR(500),
    CREATED_TIME   timestamp DEFAULT CURRENT_TIMESTAMP,
    ACCOUNT_STATUS int       default '1' NOT NULL,
    MAC_ADDRESS    VARCHAR(30)           NOT NULL
)

ALTER TABLE TBL_USERS ADD UNIQUE (email)
ALTER TABLE TBL_USERS ADD UNIQUE (username)
ALTER TABLE TBL_USERS ADD UNIQUE (phone)


CREATE TABLE TBL_FEEDBACK
(
    FEEDBACK_ID SERIAL PRIMARY KEY NOT NULL,
    FULL_NAME   VARCHAR(50)        NOT NULL,
    EMAIL       VARCHAR(200)      ,
    PHONE       VARCHAR(15)             ,
    STAR     VARCHAR(200)       NOT NULL,
    MESSAGE     VARCHAR(1000)      NOT NULL,
    FEEDBACK_DATE  TIMESTAMP DEFAULT CURRENT_TIMESTAMP

)


CREATE TABLE THEME_SETTING
(

    THEME_ID          SERIAL PRIMARY KEY NOT NULL,
    THEME_NAME        VARCHAR(100)       NOT NULL,
    CONT_BG_COLOR     CHAR(10)           NOT NULL,
    BUTTON_BG_COLOR   CHAR(10)           NOT NULL,
    BUTTON_TEXT_COLOR CHAR(10)           NOT NULL,
    LABEL_BG_COLOR    CHAR(10)           NOT NULL,
    LABEL_TEXT_COLOR  CHAR(10)           NOT NULL,
    FONT_NAME         VARCHAR(50)        NOT NULL,
    IS_ACTIVE         INT DEFAULT 0      NOT NULL
)

CREATE TABLE TBL_COLOR
(

    COLOR_ID   SERIAL PRIMARY KEY NOT NULL,
    COLOR_CODE CHAR(10)           NOT NULL,
    COLOR_NAME CHAR(10)           NOT NULL
)

CREATE TABLE TBL_FONT
(

    FONT_ID     SERIAL PRIMARY KEY NOT NULL,
    FONT_NAME   VARCHAR(100)       NOT NULL,
    DESCRIPTION VARCHAR(200)
)

CREATE TABLE TBL_DISCOUNT
(

    DISCOUNT_ID   SERIAL PRIMARY KEY NOT NULL,
    DISCOUNT      NUMERIC            NOT NULL

)


CREATE TABLE TBL_PRODUCT_TAX
(

    TAX_ID      SERIAL PRIMARY KEY NOT NULL,
    SGST        NUMERIC            NOT NULL,
    CGST        NUMERIC            NOT NULL,
    IGST        NUMERIC            NOT NULL,
    DESCRIPTION VARCHAR(200)

)

alter table tbl_product_tax
	add "gstName" VARCHAR(100);

CREATE TABLE TBL_ROLE
(

    ROLE_ID SERIAL PRIMARY KEY NOT NULL,
    ROLE    VARCHAR(50)

)

INSERT INTO TBL_ROLE (ROLE)
VALUES ('ADMIN'),
       ('MANAGER'),
       ('ASSISTANT MANAGER'),
       ('SELLER'),
       ('STOCKIST')

CREATE TABLE TBL_PRODUCTS
(
    PRODUCT_ID          SERIAL PRIMARY KEY NOT NULL,
    PRODUCT_NAME        VARCHAR(200)       NOT NULL,
    PRODUCT_DESCRIPTION VARCHAR(1000),
    PRODUCT_COLOR VARCHAR(50)        NOT NULL,
    PRODUCT_TYPE       VARCHAR(100)       NOT NULL,
    CATEGORY            VARCHAR(100)       NOT NULL,
    DISCOUNT_ID         INTEGER           ,
    ADDED_DATE timestamp default CURRENT_TIMESTAMP not null,
    TAX_ID              INTEGER           ,

    FOREIGN KEY (DISCOUNT_ID)
        REFERENCES TBL_DISCOUNT (DISCOUNT_ID),

    FOREIGN KEY (TAX_ID)
        REFERENCES TBL_PRODUCT_TAX (TAX_ID)

)

CREATE TABLE TBL_PRODUCT_IMG
(
    IMG_ID          SERIAL PRIMARY KEY NOT NULL,
    PRODUCT_ID       INTEGER      NOT NULL,
    IMG_PATH VARCHAR(500) NOT NULL,

    FOREIGN KEY (PRODUCT_ID)
        REFERENCES TBL_PRODUCTS (PRODUCT_ID)

)


CREATE TABLE TBL_PRODUCT_BILL
(

    BILL_ID        SERIAL PRIMARY KEY                  NOT NULL,
    BILL_DATE      TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    INVOICE_NUMBER INTEGER                             NOT NULL,
    INVOICE_PATH   VARCHAR(500)                        NOT NULL,
    SELLER_ID      INTEGER                             NOT NULL,
    DESCRIPTION    VARCHAR(200),
    FOREIGN KEY (SELLER_ID)
        REFERENCES TBL_USERS (USER_ID)
)



CREATE TABLE TBL_CART
(

    CART_ID        BIGSERIAL PRIMARY KEY NOT NULL,
    PRODUCT_ID     INTEGER               NOT NULL,
    SELLER_ID      INTEGER               NOT NULL,
    SELLPrice      NUMERIC               NOT NULL,
    STOCK_ID       INTEGER               NOT NULL,
    QUANTITY       NUMERIC               NOT NULL,
    QUANTITY_UNIT  VARCHAR(100)          NOT NULL,

    FOREIGN KEY (SELLER_ID)
        REFERENCES TBL_USERS (USER_ID)
)


CREATE TABLE TBL_PRODUCT_STOCK
(
    STOCK_ID   SERIAL PRIMARY KEY NOT NULL,
    PURCHASE_PRICE      NUMERIC            NOT NULL,
    PRODUCT_MRP         NUMERIC            NOT NULL,
    min_sellingPrice         NUMERIC            NOT NULL,
    PRODUCT_ID INTEGER       NOT NULL,
    HEIGHT     NUMERIC       NOT NULL,
    WIDTH      NUMERIC       NOT NULL,
    QUANTITY   NUMERIC       NOT NULL,
    STORE_DATE timestamp default CURRENT_TIMESTAMP not null,
    SIZE_UNIT  VARCHAR(100)       NOT NULL,
    QUANTITY_UNIT  VARCHAR(100)       NOT NULL,
    IS_ACTIVE  INT DEFAULT 1 NOT NULL,

    FOREIGN KEY (PRODUCT_ID)
        REFERENCES TBL_PRODUCTS (PRODUCT_ID)
    
)




CREATE TABLE TBL_CUSTOMER
(
    CUSTOMER_ID      SERIAL  PRIMARY KEY     NOT NULL,
    CUSTOMER_NAME    VARCHAR(100) NOT NULL,
    CUSTOMER_PHONE   NUMERIC UNIQUE NOT NULL,
    CUSTOMER_ADDRESS VARCHAR(200)  NOT NULL ,
    DUES_AMOUNT      NUMERIC  ,
    NOTES            VARCHAR(300),
    DESCRIPTION      VARCHAR(300)
)



CREATE TABLE tbl_saleItems
(
    sales_id         SERIAL PRIMARY KEY                  NOT NULL,
    CUSTOMER_ID      INTEGER                             NOT NULL,
    PRODUCT_ID       INTEGER                             NOT NULL,
    STOCK_ID         INTEGER                             NOT NULL,
    SELLER_ID        INTEGER                             NOT NULL,
    INVOICE_NUMBER   VARCHAR(50)                         NOT NULL,
    PRODUCT_NAME     VARCHAR(200)                        NOT NULL,
    PRODUCT_COLOR    VARCHAR(100)                        NOT NULL,
    PRODUCT_CATEGORY VARCHAR(100)                        NOT NULL,
    PRODUCT_TYPE     VARCHAR(100)                        NOT NULL,
    PRODUCT_SIZE     VARCHAR(100)                        NOT NULL,
    PURCHASE_PRICE   NUMERIC                             NOT NULL,
    PRODUCT_MRP      NUMERIC                             NOT NULL,
    SELL_PRICE       NUMERIC                             NOT NULL,
    PRODUCT_QUANTITY VARCHAR(100)                        NOT NULL,
    DISCOUNT_NAME    VARCHAR(100)                        ,
    DISCOUNT_AMOUNT  NUMERIC                             ,
    BILL_TYPE        VARCHAR(100)                        NOT NULL,
    HSN_SAC          NUMERIC                            ,
    PRODUCT_TAX      NUMERIC                            ,
    NET_AMOUNT       NUMERIC                             NOT NULL,
    TAX_AMOUNT       NUMERIC                             ,
    DATE             timestamp default CURRENT_TIMESTAMP NOT NULL,

    FOREIGN KEY (CUSTOMER_ID)
        REFERENCES tbl_customer (CUSTOMER_ID),

    FOREIGN KEY (SELLER_ID)
        REFERENCES tbl_users (user_id)
)


alter table tbl_product_tax
	add HSN_SAC NUMERIC not null;

create unique index tbl_product_tax_hsn_sac_uindex
	on tbl_product_tax (HSN_SAC);


alter table tbl_discount
	add DISCOUNT_NAME VARCHAR(200) not null;

alter table tbl_saleitems
	add igst NUMERIC;

alter table tbl_saleitems
	add sgst NUMERIC;

alter table tbl_saleitems
	add cgst NUMERIC;